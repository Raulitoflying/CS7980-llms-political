# CS7980-llms-political
# LLM Political Stance Analysis Project

## Overview
This project evaluates how well leading Large Language Models (LLMs) detect political orientation in text across various political topics. It includes tools for generating synthetic political content, analyzing model performance, and visualizing results.

## Dataset
The project uses a dataset of approximately 78,000 posts from an online political forum called Politics.com. Each post contains metadata including thread ID, topic, date, user ID, username, political affiliation (labeled as "polafil"), and the post text. This real-world data provides ground truth political stance labels for evaluating LLM performance.

## Research Branches

### [Initial Experiment](https://github.com/Raulitoflying/CS7980-llms-political/tree/initial_experiments?tab=readme-ov-file)
This branch investigated how prompting strategies affect political stance detection:
#### Data Sources
- Real-world forum data (~78K posts) with known political affiliations
- Synthetic posts generated by GPT-4o (high vs. moderate confidence; balanced LEFT/RIGHT)
#### Evaluation Setup
- 5 top LLMs tested (Claude 3.5, Gemini 2.0, LLaMA 3.1, Mistral 24B, Qwen 2.5)
- Varied prompting strategies: Zero shot, Role-based, Context-defined
#### Key Findings
- **Prompt Sensitivity**: Gemini improved drastically (↑40%) with role prompting; Mistral performance decreased
- **Bias Trend**: Most models showed better recall for left-leaning posts
- **Confidence Matters**: Accuracy dropped sharply for moderate-confidence posts; bias patterns reversed (→ right bias)
- **Model Stability**: Claude, LLaMA, and Qwen showed consistent results across prompts and confidence levels

### [Version 2 Analysis](https://github.com/Raulitoflying/CS7980-llms-political/tree/version2?tab=readme-ov-file)
This branch explores how different models analyze political content generated by other LLMs:
#### Data Generation
- Balanced LEFT/RIGHT posts across 12 political topics
- Both high and low confidence variations for each topic
- Generated by 6 different LLMs
#### Metrics Tracked
- Accuracy, Precision, Recall, F1-score
- Left/Right stance classification consistency
- Topic-specific performance
- Confidence level impact

### [Adding More Context](https://github.com/Raulitoflying/CS7980-llms-political/tree/addingMoreContext)
This branch investigates how incorporating user context affects the ability of LLMs to classify political stance:
#### Approach
- Creates user summaries from posting histories to establish political context
- Compares classification performance with and without this additional user context
- Evaluates multiple state-of-the-art models including Claude 3.7 Sonnet, Llama 3.1, GPT-4o Mini, Mistral, Qwen, and Grok
#### Key Components
- User summary generation from historical posts
- Baseline classification without context
- Enhanced classification with user context
- Comprehensive performance visualization and comparison

## Project Structure

### Data Organization
- **[Model]Data_Analysis/** - Analysis files for each model
- **[Model]_balancedData/** - Balanced datasets generated by each model

### Core Scripts
#### Data Generation and Analysis
- **`generateRouter.py`** - Generates synthetic political posts with specified political leanings
- **`openRouter.py`** - Analyzes political text using LLMs via OpenRouter API
- **`createUserSummaries.py`** - Generates political user summaries from posting histories
- **`filterUnknownPosts.py`** - Filters posts with unknown political stances

#### Visualization Tools
- **`visualize_political_data.py`** - Single model performance visualizations
- **`visualize_Combined.py`** - Comparative visualizations across multiple models
- **`visualize_matrix.py`** - Cross-analysis matrices of model performance
- **`visualazation.py`** - Compares performance metrics between baseline and context-enhanced approaches

## Models Analyzed
- Claude (Anthropic)
- Gemini (Google)
- Mistral
- Deepseek
- Llama (Meta)
- Qwen
- Grok
- GPT-4o Mini

## Political Topics Covered
- Gun Control and Second Amendment Rights
- Abortion Rights
- Immigration Reform
- Climate Change Policies
- LGBTQ+ and Transgender Rights
- Healthcare and Insurance Reform
- Voting Rights and Election Integrity
- Economic Inequality
- Death Penalty
- Drug Legalization and Decriminalization
- Russia-Ukraine War
- NBA

## Requirements
- Python 3.7+
- Required packages: pandas, numpy, matplotlib, seaborn, requests, dotenv
- OpenRouter API access for model inference

## Setup Instructions
Please refer to the specific branch README files for detailed setup and execution instructions.

## Contributors
- Project for Northeastern University CS7980
- Spring 2025
