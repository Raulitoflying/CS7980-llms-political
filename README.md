# Political Stance Classification with LLMs

This repository contains code for experimenting with Large Language Models (LLMs) for political stance classification, comparing performance with and without user context.

## Project Overview

This project investigates how incorporating user context (in the form of user summaries) affects the ability of various LLMs to classify the political orientation of social media posts. We compare performance metrics across multiple state-of-the-art models including Claude 3.7 Sonnet, Llama 3.1, GPT-4o Mini, Mistral, Qwen, and Grok.

## Files and Their Functions

- **createUserSummaries.py**: Generates political user summaries from user post histories, creating a condensed representation of each user's political orientation and posting patterns.

- **filterUnknownPosts.py**: Filters out posts with unknown political stances from the dataset, ensuring the evaluation focuses on classifiable content.

- **stanceClassificationCode(noContext).py**: Baseline classifier that predicts political stance of posts without any user context information.

- **stanceClassificationCode(withContext).py**: Enhanced classifier that incorporates user context (from summaries) when predicting political stance.

- **visualazation.py**: Creates visualizations comparing performance metrics between baseline and context-enhanced approaches across different models.

- **model_performance_comparison.csv**: Contains detailed metrics for each model's performance with and without context.

## Setup Instructions

### Prerequisites

- Python 3.8+
- OpenRouter API key (for accessing the LLMs)

### Installation

1. Clone this repository:
   ```
   git clone https://github.com/Raulitoflying/CS7980-llms-political.git
   cd CS7980-llms-political
   ```

2. Create a virtual environment (recommended):
   ```
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. Install required packages:
   ```
   pip install -r requirements.txt
   ```

4. Create a `.env` file in the project root and add your OpenRouter API key:
   ```
   OPENROUTER_API_KEY=your_api_key_here
   ```

## Running the Code

### 1. Generate User Summaries

```
python createUserSummaries.py
```
This will create political user summaries based on user post histories and save them to `political_user_summaries.json`.

### 2. Filter Unknown Posts (Optional)

```
python filterUnknownPosts.py
```
This filters posts with unknown stances from your dataset.

### 3. Run Classification Without Context

```
python "stanceClassificationCode(noContext).py"
```
You'll be prompted to enter an output directory where results will be saved.

### 4. Run Classification With Context

```
python "stanceClassificationCode(withContext).py"
```
Similarly, you'll be prompted for an output directory.

### 5. Visualize Results

```
python visualazation.py
```
This will generate visualizations comparing the performance of different models.

## Data Format

The code expects:
- A JSON file containing social media posts
- User summaries in the format generated by `createUserSummaries.py`

## Output

The code produces:
- JSON files with classification results for each model
- Visualizations comparing model performance
- CSV files with detailed metrics

## License

[Specify license]
